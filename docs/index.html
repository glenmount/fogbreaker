<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Fogbreaker — Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;margin:24px}
    h1{font-size:20px;margin:0 0 12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
    .card{border:1px solid #e1e1e1;border-radius:10px;padding:12px}
    .pid{font:600 14px/1.2 system-ui;color:#333;margin:0 0 6px}
    .badges{display:flex;gap:.4rem;margin:.25rem 0 .5rem}
    .badge{padding:.2rem .4rem;border:1px solid #ccc;border-radius:.4rem;font-size:.8rem;text-decoration:none}
    .badge.verified{border-color:#2e7d32;color:#2e7d32;font-weight:600}
    .muted{color:#777;font-size:.85rem}
  </style>
</head>
<body>
  <h1>Fogbreaker — Providers (demo)</h1>
  <p class="muted">Badges light up when we have receipts. Click them to open the source PDF.</p>
  <div id="cards" class="grid"></div>

  <script>
  (async function () {
    try {
      const [vRes, eRes] = await Promise.all([
        fetch('data/verified.json', { cache: 'no-store' }),
        fetch('data/evidence.json', { cache: 'no-store' })
      ]);
      const verified = await vRes.json();
      const evidence = await eRes.json();

      const ids = Object.keys(verified).sort();
      const wrap = document.getElementById('cards');
      wrap.innerHTML = '';
      ids.forEach(pid => {
        const m = verified[pid] || {};
        const ev = evidence[pid] || {};
        const pHref = ev.pricing ? ev.pricing : null;
        const cHref = ev.compliance ? ev.compliance : null;

        const el = document.createElement('div');
        el.className = 'card';
        el.setAttribute('data-pid', pid);
        el.innerHTML = `
          <div class="pid">${pid}</div>
          <div class="badges">
            <a class="badge ${m.pricing ? 'verified':''}" data-badge="pricing"
               ${pHref ? `href="${pHref}" target="_blank" rel="noopener"` : ''}>Pricing</a>
            <a class="badge ${m.compliance ? 'verified':''}" data-badge="compliance"
               ${cHref ? `href="${cHref}" target="_blank" rel="noopener"` : ''}>Compliance</a>
          </div>
          <div class="muted">RAD/MPIR and compliance PDFs are in <code>corpus/${pid}/</code>.</div>
        `;
        wrap.appendChild(el);
      });
    } catch (e) {
      document.getElementById('cards').innerHTML = '<div class="muted">Could not load data files.</div>';
      console.error('load failed', e);
    }
  })();
  </script>
</body>
</html>
